# Neuro ZK pallet

The Neuro ZK pallet allows the compute consumers to request zk-proofs of inference, that ensure that the model that is running in the cyborg miner that is in usage by the user is indeed running the model that the user uploaded.

## Overview

The Neuro ZK pallet integrates an `orml` oracle, in a similar way to the [status aggregator pallet](https://github.com/Cyborg-Network/cyborg-parachain/blob/nzk-oracle/pallets/status-aggregator/README.md) to verify proofs of inference generated by the miners.
The oracle based approach has been chosen since it is not feasible to verify the proofs directly on chain as of yet.

Key functionalities provided by the Neuro ZK pallet include:

* Requesting ZK Proofs from the miners
* Submitting ZK Proofs by the miners
* Submitting ZK Proof verification results by the oracle feeders
* Aggregating results from the different oracle feeders and reaching consensus about the verification status of a proof

To use it in your runtime, you need to implement
[`neuro-zk::Config`](https://example.com/dummy-link).

The supported dispatchable functions are documented in the
[`neuro-zk::Call`](https://example.com/dummy-link)

### Terminology

* **zkml**  Zero knowledge machine learning. The process of generating proofs of inference (in this case ZK-SNARKS).
* **Miner:** An inference compute provider contributing hardware resources to process AI workloads.

## Interface

### Permissionless Dispatchables

- `request_proof`: Allows a user to request a zk proof from the miner that currently runs the users model
- `submit_proof`: Allows the miner to submit the zk proof after being requested by the user

## Example Workflow for Miner Rewards

1. **User calls `request_proof(task_id)`**  
   → Adds the proof to a map of requested proofs and emits an event which the corresponding miner will pick up.

2. **Miner calls `submit_proof(task_id, proof)`**  
   → Adds a proof to the corresponding task.

3. **Oracle feeder submits data to oracle => `on_new_data()` runs**  
   → Feeder results get added to aggregation storage. If enough feeders (1 for testing) have submitted their proof verification results, a decision about the verification result is made, based on majority vote.

License: Apache-2.0
